language: java
jdk:
  - openjdk11
branches:
  only:
    - master
    - develop
cache:
  directories:
    - "$HOME/.m2/repository"
    - "$HOME/.gradle"
env:
  global:
    - secure: dYn1pSl+N/u+ghHpf/JN/LBWefQlbv/xl28Iw91Pef3pjlInORAm2bqPYNcTjM0lIwvuVOxDzvcfzZEatA8CQ8pP2ELRqG30s0fQob8fUUvrigMpOZVQ9jCu6O+KdQBDRSMHzqfHV9aUgPVsxhFDmLVKrUAoyN3cHetQ3MHeXaC2S6FukOMJ3wJ63uaefGhbsC6XFZ9nlo/yJsNlCgalx8bhWtClNQt32HfDOv3hCuynbMK2+UBIquBMorz3sAGskMLBGLZUuCvk+FPCPXT72RbTwRc+0VxcfQ0xs40isN6FlH99NiiYSWb9pMdty1ZWrUNSOCrcsp4VULcZzfW3Lg8Nvvur8/ZwJRwBmAWqEPTYfO8rCHECrLE2NYPMhB6Nk+8mj1UALwjXAE1z9sffzr5k5CXI7WZQrQcQSDMzBg0EK/bQIMs9YasLVnWcdvxUXOFBa5VdRoai9W6Kv4QpT+qLiV1J2SHzPRR+o43kgZ9/BMZdT+ueRMlIOY2heelYYuEmaW6n5S7/Tb3im88OvCIr0OKORWrfAxhX1Nt2zgG/QOLLkpq4dNg0XBPC1AIL1YdO3FTs6OHb6LdfBMhnuhcQlxRySE4MYhR3qMv399S5o85msYw94chRUyzfy4+NhKg8EYmdbS0GcFEUvZbQxQAXig2CCDlI4XMC/U9QUug=
    - secure: VxBSpJS86vG0hYY10aO5o2keCHDo0szy/6x8t6DLsl+aQ//cAaXQkIjFUd+LXIqJh0tKXsaXTZGi//UqFFEDxkQN9eGkon0PFUIwO/AVRewCrK92feQ+Bn/WLIaoWSmBe4NpqI04dkkco4Y4UMXwJA7MUd9hXv/htqnKj6pISWRrSVj8ZfRRtwAgthZ+qCGOc4ADBY4EaeZb8GdveTJfSoi6jkSI5oUTM8MGgHtksAVEePIP3GxDF049fd9JV/NMkeHzet9G6v6Szgh33TWa11i4XlwI8wUTyHD97AAwogOheyjHQv3z8oyYNdg7TLQwx1jezsSEoyUhJC0DhjkUnnOC2jZOl8MUxPABv4iCm9EXDfcNyTBWi3004SZntot/JTR2wEUPsPCWD2p4+lO9Pa7uFMp1gvyYN4M8dxt/88M/ApbakLJ/x2sTDVjD7+honLkqBn7AXbvp9qlW40impQgpVkuU0JoJg+Ro9uZRYgPhpRG8lmjHDqPWAEgC3YbSPqbMFrXTMkoHM6+e7O8XkTMWzGJf8yYkIJdd+yM4/pfDZVgsofMMnXGKo9eh+db+bjizaUTlMhMRDVu5wjcRxT9Ti464MCo66BvLsPRd27BokiOXaDKqPDzG3CyReUYFfuJV+wym9qu5BKd7lQpPeqRoXFz16GfDtzfdhyLcQJg=
    - secure: LsTyX1n6ekySlifDs7pwjuJF12c23hIG2APIrxnGtlpbUeXFQoQunbmeG+tkPGUeGner3WmTS7i03APhdoTuoDfK+SdZLE2lkx8HiIPlWOq57AjHdyAfX/jEwkvESrjlMr6Gv0pOsfxtq0JyC4eLMuI7dV2sBYeMANfP3nnEdfkXHPvRb46f5R7R3a2ymrxehSI+iqf22FYrpuUxJOuQZFVpq/lPdXRLfN3ArB9U6WWaNBUbXA01/DhrmmGS1P22j0Vcu/QkvMNrqSAwQAU8D+Fs51cTJw310BoZHyaBPyPeb+lZCJYImKM8bh/OzMbJJ69LS8m2dZ7nEAOYZbkMpowTejADl/U2F83uVed7wOlolluzB135nSg87wMhC8Pd9PrJZhzrjSRtlyW1t8bJrMNnWrTkaBdJxaYu+pz0dVeWHZU00yxCFnDNY+yn5oe/vs/RPNTZQhrRwrhWi1Cae8eE1VIfutYetKlgdkN520FGw5y4dfFYAIf7Ac3ZTOXAl8+0jX0pIZq+uhr8VXk/hZ4TJp8w45w4YNtKWoMsUWPZg/Sy0Jd8Ixhk19lGF07owLy8y8ytAVgziBOY7O0+OYLL95x4F2STMrEC5rBUDvmJDpamQRhM+PY6LGhqc2s/+pbL7XhmaSJWAb/mKoJNPYbjZM3e/ZUKKXnP808DKLc=
    - secure: EYUmkMxYGTrMsBsOn7qA1KEzSz5d21eKnvU5JKcouiOQ+j91cNBMzkSLMHuMIq54Bwcp9bci5BEqQpKEeVUb+MBRBQuiH2ncn+MhIrusi9vuLJUaOVTkmNOUWN1lbO+VH11k905NyKcUf4wOsnnSrZ6oyUATRV5wLPrNVRLim8aMc2gArPxFmLvAsQXbS7VzG2W6+FVphEPDhg9RHafXZYdYmYu2B6fXs68WTiHAMv64+xwBua3cl9AuaB1uYUbat1l7nB+T1EyR/wCRuyrwExTTr4iF5FFfoMXS6kdwLuPpjzqxXrsLqwyRtWDvOzlUX2PajSOmFEB2Z1nva341ok/RSmTHGPCQ7bvYWqKDr3ZqqKZw2IOvZIIunCYl7eBXarUsbl/gIZ5x2AsF3JtfgeILQUOlIQdkvgw2Uw8ulFq0gDWvn4LyjZi3tQzLPJdIkk2dXih6h/Z4ktcwyHNEvOxZJ5rzsPUZNJSPpI40lKFnBSvsbGMAEbiK+0nZ1EA6VPcbPZWmuQbMyVBS3l0Og9XipJ8YjNMrQMBEsAghkrkCRknXgDB4nkwmCxGsVJ64B9Ui3ze02DE24ZVKCvtSZsySetYpMl/eOpeM8GUEdztIPBSBOOkXuFifOYipXf5cwmSPyJQQcF8mHWFfjvrpzRTaQPP/MhPP9nXlGnDvj9Y=
script:
  - "./gradlew check"
  - "./gradlew sonarqube -Dsonar.projectKey=spring-cloud-java8 -Dsonar.organization=coolpush-github -Dsonar.host.url=https://sonarcloud.io -Dsonar.login=$SONAR_TOKEN"
  - "./gradlew clean build -x test"
  - "./gradlew jib -Djib.to.auth.username=$DOCKER_USER -Djib.to.auth.password=$DOCKER_PASS"
notifications:
  slack: coldbrew-group:9SbCeTSFoeGCjAScT1Z2jGwN
